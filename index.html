<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>EchoBoard</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- iOS PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="EchoBoard">
    <link rel="apple-touch-icon" href="./icons/icon-152.png">
    
    <!-- Android PWA Support -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#FFCC00">
    
    <!-- Security and Performance -->
    <meta name="referrer" content="no-referrer">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app-container">
        <header id="header" role="banner">
            <h1>EchoBoard</h1>
        </header>
        
        <!-- Side Control Buttons -->
        <div id="side-controls" role="region" aria-label="Quick access controls">
            <button id="controls-modal-btn" 
                    class="side-control-button" 
                    aria-label="Open speech and display controls"
                    title="Controls">
                ‚öôÔ∏è
            </button>
            <button id="quick-phrases-modal-btn" 
                    class="side-control-button" 
                    aria-label="Open quick phrases"
                    title="Quick Phrases">
                üí¨
            </button>
            <button id="add-symbol-modal-btn" 
                    class="side-control-button" 
                    aria-label="Add new symbol"
                    title="Add Symbol">
                ‚ûï
            </button>
            <button id="symbols-toggle-btn" 
                    class="side-control-button" 
                    aria-label="Toggle symbols panel"
                    aria-expanded="true"
                    title="Collapse/Expand Symbols">
                ‚óÅ
            </button>
        </div>

        <main id="main-content" role="main">
            <section id="message-display-area" role="region" aria-label="Message Display Area" aria-live="polite">
                <p id="message-output" aria-label="Current message">Your message will appear here...</p>
            </section>
            <section id="input-area" role="region" aria-label="Text Input and Keyboard Controls">
                <textarea id="text-input" 
                         placeholder="Type or use keyboard..." 
                         aria-label="Text input area"
                         aria-describedby="word-prediction-placeholder"></textarea>
                <div id="word-prediction-placeholder" 
                     aria-label="Word predictions" 
                     aria-live="polite"
                     style="/* Basic inline styles for now */ height: 20px; font-size: 0.8em; color: #FFCC00; text-align: center; margin-top: 5px;">
                    {Word predictions will appear here}
                </div>
                <div id="on-screen-keyboard" 
                     role="region" 
                     aria-label="On-screen keyboard"
                     aria-describedby="keyboard-instructions">
                    <!-- Keyboard rows will be generated by JS or manually placed here -->
                </div>
                <div id="keyboard-instructions" class="screen-reader-only">
                    Use Tab to navigate keys, Enter or Space to activate
                </div>

                <div id="message-editing-controls" role="group" aria-label="Message editing controls">
                    <button id="delete-last-button" 
                            aria-label="Delete last word from message"
                            tabindex="0">Delete Last</button>
                    <button id="clear-all-button" 
                            aria-label="Clear entire message"
                            tabindex="0">Clear All</button>
                    <button id="speak-button" 
                            aria-label="Speak the current message"
                            tabindex="0">Speak</button>
                </div>
            </section>

            <div id="symbol-grid-container" role="region" aria-label="Symbol grid">
                <div id="symbol-category-nav" role="tablist" aria-label="Symbol categories">
                    <button class="category-tab active" 
                            data-category="basic" 
                            role="tab" 
                            aria-selected="true" 
                            aria-controls="symbols-basic"
                            tabindex="0">Basic</button>
                    <button class="category-tab" 
                            data-category="emotions" 
                            role="tab" 
                            aria-selected="false" 
                            aria-controls="symbols-emotions"
                            tabindex="0">Emotions</button>
                    <button class="category-tab" 
                            data-category="actions" 
                            role="tab" 
                            aria-selected="false" 
                            aria-controls="symbols-actions"
                            tabindex="0">Actions</button>
                    <button class="category-tab" 
                            data-category="custom" 
                            role="tab" 
                            aria-selected="false" 
                            aria-controls="symbols-custom"
                            tabindex="0">Custom</button>
                </div>
                <h2 id="symbol-grid-title">Symbols - Basic</h2>
                <div id="symbol-grid" 
                     role="tabpanel" 
                     aria-labelledby="symbol-grid-title"
                     aria-live="polite">
                    <!-- Symbol grid will be generated by JS -->
                </div>
            </div>
        </main>
        
        <footer id="footer" role="contentinfo">
            <p>&copy; 2024 Federico Chialvo and Dean Sitton. All rights reserved.</p>
        </footer>
    </div>

    <!-- Controls Modal -->
    <div id="controls-modal" class="modal" role="dialog" aria-labelledby="controls-modal-title" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="controls-modal-title">Speech & Display Controls</h2>
                <button class="modal-close" aria-label="Close controls">&times;</button>
            </div>
            <div class="modal-body">
                <div class="control-group">
                    <label for="voice-select">Voice:</label>
                    <select id="voice-select" 
                            aria-label="Select voice for text-to-speech"
                            tabindex="0">Your browser does not support voice selection.</select>
                </div>
                <div class="control-group">
                    <label for="rate-slider">Rate: <span id="rate-value" aria-live="polite">1</span></label>
                    <input type="range" 
                           id="rate-slider" 
                           min="0.1" 
                           max="2" 
                           step="0.1" 
                           value="1"
                           aria-label="Speech rate"
                           aria-describedby="rate-help"
                           tabindex="0">
                    <div id="rate-help" class="screen-reader-only">
                        Adjust the speed of speech from 0.1 to 2.0
                    </div>
                </div>
                <div class="control-group">
                    <label for="pitch-slider">Pitch: <span id="pitch-value" aria-live="polite">1</span></label>
                    <input type="range" 
                           id="pitch-slider" 
                           min="0" 
                           max="2" 
                           step="0.1" 
                           value="1"
                           aria-label="Speech pitch"
                           aria-describedby="pitch-help"
                           tabindex="0">
                    <div id="pitch-help" class="screen-reader-only">
                        Adjust the pitch of speech from 0 to 2.0
                    </div>
                </div>

                <div class="control-group" id="font-size-controls" role="group" aria-label="Font size controls">
                    <label>Font Size:</label>
                    <div class="button-group">
                        <button id="font-size-s" 
                                data-size="small" 
                                aria-label="Set font size to small"
                                tabindex="0">S</button>
                        <button id="font-size-m" 
                                data-size="medium" 
                                aria-label="Set font size to medium"
                                tabindex="0">M</button>
                        <button id="font-size-l" 
                                data-size="large" 
                                aria-label="Set font size to large"
                                tabindex="0">L</button>
                    </div>
                </div>

                <div class="control-group" id="theme-controls" role="group" aria-label="Theme controls">
                    <label>Theme:</label>
                    <button id="theme-toggle-button" 
                            aria-label="Toggle between light and dark theme"
                            tabindex="0">Toggle Theme</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Phrases Modal -->
    <div id="quick-phrases-modal" class="modal" role="dialog" aria-labelledby="quick-phrases-modal-title" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="quick-phrases-modal-title">Quick Phrases</h2>
                <button class="modal-close" aria-label="Close quick phrases">&times;</button>
            </div>
            <div class="modal-body">
                <div id="quick-phrases-grid">
                    <button class="quick-phrase-button" 
                            data-phrase="Yes" 
                            aria-label="Add 'Yes' to message"
                            tabindex="0">Yes</button>
                    <button class="quick-phrase-button" 
                            data-phrase="No" 
                            aria-label="Add 'No' to message"
                            tabindex="0">No</button>
                    <button class="quick-phrase-button" 
                            data-phrase="Help" 
                            aria-label="Add 'Help' to message"
                            tabindex="0">Help</button>
                    <button class="quick-phrase-button" 
                            data-phrase="Thank you" 
                            aria-label="Add 'Thank you' to message"
                            tabindex="0">Thank you</button>
                    <button class="quick-phrase-button" 
                            data-phrase="Please" 
                            aria-label="Add 'Please' to message"
                            tabindex="0">Please</button>
                    <button class="quick-phrase-button" 
                            data-phrase="Sorry" 
                            aria-label="Add 'Sorry' to message"
                            tabindex="0">Sorry</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Symbol Modal -->
    <div id="add-symbol-modal" class="modal" role="dialog" aria-labelledby="add-symbol-modal-title" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="add-symbol-modal-title">Add New Symbol</h2>
                <button class="modal-close" aria-label="Close add symbol">&times;</button>
            </div>
            <div class="modal-body">
                <div id="add-symbol-form-container">
                    <div>
                        <label for="new-symbol-display">Display Text (on button):</label>
                        <input type="text" 
                               id="new-symbol-display" 
                               placeholder="e.g., Happy"
                               aria-describedby="display-help">
                        <div id="display-help" class="screen-reader-only">
                            Enter the text that will appear on the symbol button
                        </div>
                    </div>
                    <div>
                        <label for="new-symbol-text">Spoken/Message Text:</label>
                        <input type="text" 
                               id="new-symbol-text" 
                               placeholder="e.g., I feel happy "
                               aria-describedby="text-help">
                        <div id="text-help" class="screen-reader-only">
                            Enter the text that will be spoken when the symbol is pressed
                        </div>
                    </div>
                    <div>
                        <label for="new-symbol-image">Symbol Image (optional):</label>
                        <input type="file" 
                               id="new-symbol-image" 
                               accept="image/*"
                               aria-describedby="image-help">
                        <div id="image-help" class="screen-reader-only">
                            Upload an image to display on the symbol button
                        </div>
                    </div>
                    <button id="add-symbol-button" 
                            aria-label="Add new symbol to grid"
                            tabindex="0">Add Symbol</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html> 